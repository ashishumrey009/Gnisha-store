{"ast":null,"code":"// import products from '../../static/products.json'\nimport Product from '../../models/Product';\nimport connectDb from '../../utils/connectDb';\nconnectDb();\nexport default (async (req, res) => {\n  // console.log(req,res)\n  const {\n    page,\n    size\n  } = req.query;\n  const pageNum = Number(page);\n  const pageSize = Number(size);\n  let products = [];\n  const totalDocs = await Product.countDocuments();\n  const totalPages = Math.ceil(totalDocs / pageSize);\n\n  if (pageNum === 1) {\n    products = await Product.find().limit(pageSize);\n  } else {\n    const skips = pageSize * (pageNum - 1);\n    products = await Product.find().skip(skips).limit(pageSize);\n  } // const products =await Product.find().exec()\n  // console.log(products)\n\n\n  res.status(200).json({\n    products,\n    totalPages\n  });\n});","map":{"version":3,"sources":["/media/ashish/workbook/Ginisha-Store/pages/api/products.js"],"names":["Product","connectDb","req","res","page","size","query","pageNum","Number","pageSize","products","totalDocs","countDocuments","totalPages","Math","ceil","find","limit","skips","skip","status","json"],"mappings":"AAAA;AACA,OAAOA,OAAP,MAAoB,sBAApB;AACA,OAAOC,SAAP,MAAsB,uBAAtB;AACAA,SAAS;AACT,gBAAe,OAAOC,GAAP,EAAWC,GAAX,KAAkB;AAC7B;AACA,QAAK;AAACC,IAAAA,IAAD;AAAMC,IAAAA;AAAN,MAAaH,GAAG,CAACI,KAAtB;AACA,QAAMC,OAAO,GAAGC,MAAM,CAACJ,IAAD,CAAtB;AACA,QAAMK,QAAQ,GAAGD,MAAM,CAACH,IAAD,CAAvB;AACA,MAAIK,QAAQ,GAAC,EAAb;AACA,QAAMC,SAAS,GAAE,MAAMX,OAAO,CAACY,cAAR,EAAvB;AACA,QAAMC,UAAU,GAAGC,IAAI,CAACC,IAAL,CAAUJ,SAAS,GAACF,QAApB,CAAnB;;AACA,MAAGF,OAAO,KAAG,CAAb,EAAe;AACXG,IAAAA,QAAQ,GAAE,MAAMV,OAAO,CAACgB,IAAR,GAAeC,KAAf,CAAqBR,QAArB,CAAhB;AACH,GAFD,MAEK;AACD,UAAMS,KAAK,GAAET,QAAQ,IAAEF,OAAO,GAAC,CAAV,CAArB;AACAG,IAAAA,QAAQ,GAAE,MAAMV,OAAO,CAACgB,IAAR,GAAeG,IAAf,CAAoBD,KAApB,EAA2BD,KAA3B,CAAiCR,QAAjC,CAAhB;AACH,GAb4B,CAc7B;AACA;;;AACAN,EAAAA,GAAG,CAACiB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACX,IAAAA,QAAD;AAAUG,IAAAA;AAAV,GAArB;AACH,CAjBD","sourcesContent":["// import products from '../../static/products.json'\nimport Product from '../../models/Product'\nimport connectDb from '../../utils/connectDb'\nconnectDb()\nexport default async (req,res) =>{\n    // console.log(req,res)\n    const{page,size} =req.query\n    const pageNum = Number(page)\n    const pageSize = Number(size)\n    let products=[]\n    const totalDocs= await Product.countDocuments()\n    const totalPages = Math.ceil(totalDocs/pageSize)\n    if(pageNum===1){\n        products= await Product.find().limit(pageSize)\n    }else{\n        const skips =pageSize*(pageNum-1)\n        products= await Product.find().skip(skips).limit(pageSize)\n    }\n    // const products =await Product.find().exec()\n    // console.log(products)\n    res.status(200).json({products,totalPages})\n}"]},"metadata":{},"sourceType":"module"}